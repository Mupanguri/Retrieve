(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{640:(e,a,s)=>{"use strict";s.d(a,{U:()=>f});var t=s(8727);function f(){return(0,t.createBrowserClient)("https://ykmuarfkuljramoadkcb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlrbXVhcmZrdWxqcmFtb2Fka2NiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNTkzMzgsImV4cCI6MjA3NTYzNTMzOH0.Eg46F_RBfRPndJcxfl6zLSmopP0eFwa3wEma49Pb8Dw")}},3589:(e,a,s)=>{Promise.resolve().then(s.bind(s,7978))},7978:(e,a,s)=>{"use strict";s.d(a,{AdminDashboard:()=>x});var t=s(5155),f=s(8661),i=s.n(f),n=s(2115),l=s(63),c=s(640),d=s(5514),r=s.n(d);function o(e){let a=new(r())(e),s=a.getBrowser(),t=a.getOS(),f=a.getDevice(),i="desktop",n="";f.type&&(i=f.type);let l=[];return f.model&&l.push(f.model),f.vendor&&l.push(f.vendor),t.name&&l.push(t.name),n=l.length>0?l.join(" "):"".concat(s.name||"Unknown"," Browser"),{browser:s.name||"Unknown",os:"".concat(t.name||"Unknown"," ").concat(t.version||"").trim(),device:f.model||"Unknown",deviceType:i,deviceName:n}}function x(e){let{users:a,activities:s,adminEmail:f}=e,[d,r]=(0,n.useState)(a),[x,m]=(0,n.useState)(s),[j,p]=(0,n.useState)(new Date),h=(0,l.useRouter)();(0,n.useEffect)(()=>{let e=setInterval(()=>{p(new Date)},1e3),a=(0,c.U)(),s=a.channel("admin-updates").on("postgres_changes",{event:"*",schema:"public",table:"connected_users"},e=>{"INSERT"===e.eventType?r(a=>[e.new,...a]):"UPDATE"===e.eventType?r(a=>a.map(a=>a.id===e.new.id?e.new:a)):"DELETE"===e.eventType&&r(a=>a.filter(a=>a.id!==e.old.id))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"activity_log"},e=>{m(a=>[e.new,...a].slice(0,50))}).subscribe();return()=>{clearInterval(e),a.removeChannel(s)}},[]);let u=async()=>{let e=(0,c.U)();await e.auth.signOut(),h.push("/admin/login"),h.refresh()},v=d.filter(e=>!e.trapped).length,g=d.filter(e=>e.trapped).length,N=d.length,b=d.filter(e=>e.terms_read_complete).length,y=N>0?Math.round(b/N*100):0,w=e=>new Date(e).toLocaleTimeString();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{id:"2ff4378afe058000",children:'*.jsx-2ff4378afe058000{margin:0;padding:0;box-sizing:border-box}.body.jsx-2ff4378afe058000{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background-color:#f5f5f5;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.admin-container.jsx-2ff4378afe058000{width:100%;max-width:1200px;margin:0 auto}.admin-header.jsx-2ff4378afe058000{background-color:#0066b2;color:white;padding:16px 24px;margin-bottom:20px;border-radius:8px;display:flex;align-items:center;justify-content:space-between}.admin-title.jsx-2ff4378afe058000{font-size:24px;font-weight:600}.admin-meta.jsx-2ff4378afe058000{display:flex;gap:24px;font-size:14px}.meta-item.jsx-2ff4378afe058000{display:flex;flex-direction:column;gap:4px}.meta-label.jsx-2ff4378afe058000{opacity:.8;font-size:12px;text-transform:uppercase;font-weight:500}.meta-value.jsx-2ff4378afe058000{font-weight:600}.stats-grid.jsx-2ff4378afe058000{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:32px}.stat-card.jsx-2ff4378afe058000{background:white;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);overflow:hidden}.stat-header.jsx-2ff4378afe058000{background-color:#0066b2;color:white;padding:12px 16px;font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-content.jsx-2ff4378afe058000{padding:20px 16px}.stat-value.jsx-2ff4378afe058000{font-size:32px;font-weight:300;color:#333}.stat-subtext.jsx-2ff4378afe058000{font-size:12px;color:#666;margin-top:4px}.content-grid.jsx-2ff4378afe058000{display:grid;grid-template-columns:1fr 1fr;gap:24px}.data-section.jsx-2ff4378afe058000{background:white;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);overflow:hidden}.section-header.jsx-2ff4378afe058000{background-color:#0066b2;color:white;padding:16px;font-size:16px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.section-content.jsx-2ff4378afe058000{padding:20px}.user-table.jsx-2ff4378afe058000{width:100%;border-collapse:collapse}.user-table.jsx-2ff4378afe058000 th.jsx-2ff4378afe058000{text-align:left;padding:12px;font-size:12px;font-weight:600;color:#666;text-transform:uppercase;border-bottom:2px solid#e9ecef}.user-table.jsx-2ff4378afe058000 td.jsx-2ff4378afe058000{padding:12px;border-bottom:1px solid#e9ecef;font-size:14px}.user-status.jsx-2ff4378afe058000{display:inline-block;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase}.status-active.jsx-2ff4378afe058000{background-color:#d4edda;color:#155724}.status-captured.jsx-2ff4378afe058000{background-color:#f8d7da;color:#721c24}.status-terms-read.jsx-2ff4378afe058000{background-color:#d1ecf1;color:#0c5460}.activity-list.jsx-2ff4378afe058000{max-height:600px;overflow-y:auto}.activity-item.jsx-2ff4378afe058000{border-left:3px solid#0066b2;padding:12px 0 12px 20px;margin-bottom:16px;background-color:#f8f9fa;border-radius:4px}.activity-item.jsx-2ff4378afe058000:last-child{margin-bottom:0}.activity-header.jsx-2ff4378afe058000{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.activity-type.jsx-2ff4378afe058000{font-size:12px;font-weight:600;color:#0066b2;text-transform:uppercase}.activity-time.jsx-2ff4378afe058000{font-size:11px;color:#666}.activity-details.jsx-2ff4378afe058000{font-size:13px;color:#555;line-height:1.4}.activity-details.jsx-2ff4378afe058000 div.jsx-2ff4378afe058000{margin-bottom:2px}.btn-logout.jsx-2ff4378afe058000{background-color:#f44336;color:white;border:none;border-radius:4px;padding:8px 16px;font-size:12px;font-weight:500;cursor:pointer;transition:background-color.3s}.btn-logout.jsx-2ff4378afe058000:hover{background-color:#d32f2f}.no-data.jsx-2ff4378afe058000{text-align:center;color:#666;font-size:14px;padding:40px}.monitoring-indicator.jsx-2ff4378afe058000{position:fixed;bottom:20px;left:20px;background:white;padding:8px 12px;border-radius:20px;box-shadow:0 2px 8px rgba(0,0,0,.1);display:flex;align-items:center;gap:8px;font-size:12px;color:#666}.pulse-dot.jsx-2ff4378afe058000{width:8px;height:8px;background-color:#4caf50;border-radius:50%;animation:pulse 2s infinite}@keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@media(max-width:768px){.content-grid.jsx-2ff4378afe058000{grid-template-columns:1fr}.admin-meta.jsx-2ff4378afe058000{flex-direction:column;gap:12px}.stats-grid.jsx-2ff4378afe058000{grid-template-columns:1fr}}'}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 body",children:(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 admin-container",children:[(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 admin-header",children:[(0,t.jsx)("h1",{className:"jsx-2ff4378afe058000 admin-title",children:"Admin Control Panel"}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 admin-meta",children:[(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 meta-item",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-label",children:"System"}),(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-value",children:"HICC Guest Network"})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 meta-item",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-label",children:"Access Level"}),(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-value",children:"Administrator"})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 meta-item",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-label",children:"Logged in as"}),(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-value",children:f})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 meta-item",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-label",children:"Status"}),(0,t.jsx)("span",{style:{color:"#4caf50"},className:"jsx-2ff4378afe058000 meta-value",children:"âœ“ Operational"})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 meta-item",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 meta-label",children:"System Time"}),(0,t.jsx)("span",{style:{fontFamily:"monospace"},className:"jsx-2ff4378afe058000 meta-value",children:j.toLocaleTimeString()})]}),(0,t.jsx)("button",{onClick:u,className:"jsx-2ff4378afe058000 btn-logout",children:"Logout"})]})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stats-grid",children:[(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-card",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-header",children:"Total Sessions"}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-content",children:(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-value",children:N})})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-card",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-header",children:"Active Users"}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-content",children:(0,t.jsx)("div",{style:{color:"#4caf50"},className:"jsx-2ff4378afe058000 stat-value",children:v})})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-card",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-header",children:"Captured Users"}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-content",children:(0,t.jsx)("div",{style:{color:"#f44336"},className:"jsx-2ff4378afe058000 stat-value",children:g})})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-card",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-header",children:"Terms Read"}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-content",children:[(0,t.jsx)("div",{style:{color:"#2196f3"},className:"jsx-2ff4378afe058000 stat-value",children:b}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-subtext",children:[y,"% of users"]})]})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-card",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-header",children:"Capture Rate"}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 stat-content",children:(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 stat-value",children:[N>0?Math.round(g/N*100):0,"%"]})})]})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 content-grid",children:[(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 data-section",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 section-header",children:"Connected Users"}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 section-content",children:(0,t.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},className:"jsx-2ff4378afe058000",children:0===d.length?(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 no-data",children:"No users connected yet"}):(0,t.jsxs)("table",{className:"jsx-2ff4378afe058000 user-table",children:[(0,t.jsx)("thead",{className:"jsx-2ff4378afe058000",children:(0,t.jsxs)("tr",{className:"jsx-2ff4378afe058000",children:[(0,t.jsx)("th",{className:"jsx-2ff4378afe058000",children:"Name"}),(0,t.jsx)("th",{className:"jsx-2ff4378afe058000",children:"Email"}),(0,t.jsx)("th",{className:"jsx-2ff4378afe058000",children:"Status"}),(0,t.jsx)("th",{className:"jsx-2ff4378afe058000",children:"Device"}),(0,t.jsx)("th",{className:"jsx-2ff4378afe058000",children:"Connected"})]})}),(0,t.jsx)("tbody",{className:"jsx-2ff4378afe058000",children:d.map(e=>(0,t.jsxs)("tr",{className:"jsx-2ff4378afe058000",children:[(0,t.jsx)("td",{className:"jsx-2ff4378afe058000",children:e.name||"Unknown"}),(0,t.jsx)("td",{className:"jsx-2ff4378afe058000",children:e.email||"N/A"}),(0,t.jsxs)("td",{className:"jsx-2ff4378afe058000",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 "+"user-status ".concat(e.trapped?"status-captured":"status-active"),children:e.trapped?"Captured":"Active"}),e.terms_read_complete&&(0,t.jsx)("span",{style:{marginLeft:"4px"},className:"jsx-2ff4378afe058000 user-status status-terms-read",children:"Terms Read"})]}),(0,t.jsx)("td",{className:"jsx-2ff4378afe058000",children:function(e){let a=o(e);return a.deviceName||"".concat(a.browser," on ").concat(a.os)}(e.user_agent)||function(e){let a=o(e);return"mobile"===a.deviceType?"Mobile Phone":"tablet"===a.deviceType?"Tablet":"console"===a.deviceType?"Gaming Console":"smarttv"===a.deviceType?"Smart TV":"wearable"===a.deviceType?"Wearable Device":"embedded"===a.deviceType?"Embedded Device":"Desktop Computer"}(e.user_agent)||"Unknown"}),(0,t.jsxs)("td",{className:"jsx-2ff4378afe058000",children:[(0,t.jsx)("div",{style:{fontSize:"12px",color:"#666"},className:"jsx-2ff4378afe058000",children:new Date(e.connected_at).toLocaleDateString()}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#999"},className:"jsx-2ff4378afe058000",children:w(e.connected_at)})]})]},e.id))})]})})})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 data-section",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 section-header",children:"Activity Log"}),(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 section-content",children:(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 activity-list",children:0===x.length?(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 no-data",children:"No activity logged yet"}):x.map(e=>{var a,s,f,i,n;return(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 activity-item",children:[(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 activity-header",children:[(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 activity-type",children:e.action_type.replace("_"," ").toUpperCase()}),(0,t.jsx)("span",{className:"jsx-2ff4378afe058000 activity-time",children:w(e.created_at)})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 activity-details",children:[(null==(a=e.details)?void 0:a.name)&&(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000",children:["Name: ",e.details.name]}),(null==(s=e.details)?void 0:s.email)&&(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000",children:["Email: ",e.details.email]}),(null==(f=e.details)?void 0:f.phone)&&(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000",children:["Phone: ",e.details.phone]}),(null==(i=e.details)?void 0:i.device_name)&&(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000",children:["Device: ",e.details.device_name]}),(null==(n=e.details)?void 0:n.terms_read_complete)!==void 0&&(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000",children:["Terms Read: ",(0,t.jsx)("span",{style:{color:e.details.terms_read_complete?"#4caf50":"#f44336",fontWeight:"bold"},className:"jsx-2ff4378afe058000",children:e.details.terms_read_complete?"Yes":"No"})]})]})]},e.id)})})})]})]}),(0,t.jsxs)("div",{className:"jsx-2ff4378afe058000 monitoring-indicator",children:[(0,t.jsx)("div",{className:"jsx-2ff4378afe058000 pulse-dot"}),(0,t.jsx)("span",{className:"jsx-2ff4378afe058000",children:"HICC System Monitoring Active"})]})]})})]})}}},e=>{e.O(0,[386,514,441,255,358],()=>e(e.s=3589)),_N_E=e.O()}]);