(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{640:(a,e,s)=>{"use strict";s.d(e,{U:()=>t});var n=s(8727);function t(){return(0,n.createBrowserClient)("https://ykmuarfkuljramoadkcb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlrbXVhcmZrdWxqcmFtb2Fka2NiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNTkzMzgsImV4cCI6MjA3NTYzNTMzOH0.Eg46F_RBfRPndJcxfl6zLSmopP0eFwa3wEma49Pb8Dw")}},3489:(a,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>c});var n=s(5155),t=s(8661),i=s.n(t),o=s(2115),r=s(63),d=s(640);function c(){let[a,e]=(0,o.useState)(null),[s,t]=(0,o.useState)(0),[c,l]=(0,o.useState)(!0),f=(0,r.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let a=(0,d.U)(),{data:s,error:n}=await a.from("connected_users").select("*").eq("trapped",!1).order("connected_at",{ascending:!1}).limit(1).single();if(n||!s)return void f.push("/");e(s);let i=new Date(s.connected_at).getTime(),o=Date.now(),r=Math.floor((o-i)/1e3);t(r);let c=setInterval(()=>{t(a=>a+1)},1e3);return l(!1),()=>clearInterval(c)}catch(a){console.error("Failed to load user data:",a),f.push("/")}})()},[f]);let x=async()=>{if(a){let e=(0,d.U)();await e.from("connected_users").update({trapped:!0}).eq("id",a.id),await e.from("activity_log").insert({user_id:a.id,action_type:"user_disconnect",setting_name:"portal",enabled:!1,details:{timestamp:new Date().toISOString()}}),localStorage.removeItem("portal_session_id"),f.push("/")}};return c?(0,n.jsxs)("div",{className:"jsx-7a90291f0de70b21 body",children:[(0,n.jsx)("div",{className:"jsx-7a90291f0de70b21 container",children:(0,n.jsxs)("div",{className:"jsx-7a90291f0de70b21 card",children:[(0,n.jsx)("div",{className:"jsx-7a90291f0de70b21 header",children:"SOPHOS"}),(0,n.jsxs)("div",{style:{textAlign:"center",padding:"60px 40px"},className:"jsx-7a90291f0de70b21 content",children:[(0,n.jsx)("div",{style:{marginBottom:"20px"},className:"jsx-7a90291f0de70b21",children:"Loading your portal..."}),(0,n.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #0066b2",borderTop:"4px solid #f3f3f3",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-7a90291f0de70b21"})]})]})}),(0,n.jsx)(i(),{id:"7a90291f0de70b21",children:"@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{id:"f528a832ada58387",children:'*.jsx-f528a832ada58387{margin:0;padding:0;box-sizing:border-box}.body.jsx-f528a832ada58387{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background-color:#f5f5f5;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.container.jsx-f528a832ada58387{width:100%;max-width:500px}.card.jsx-f528a832ada58387{background:white;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);overflow:hidden;margin-bottom:30px}.header.jsx-f528a832ada58387{background-color:#0066b2;color:white;padding:24px;text-align:center;font-size:28px;font-weight:600;letter-spacing:2px}.content.jsx-f528a832ada58387{padding:40px}.network-title.jsx-f528a832ada58387{color:#0066b2;font-size:20px;font-weight:500;text-align:center;margin-bottom:30px}.session-info.jsx-f528a832ada58387{background-color:#f8f9fa;border-radius:6px;padding:20px;margin-bottom:25px}.info-item.jsx-f528a832ada58387{display:flex;justify-content:space-between;margin-bottom:10px;font-size:14px}.info-item.jsx-f528a832ada58387:last-child{margin-bottom:0}.info-label.jsx-f528a832ada58387{font-weight:500;color:#666}.info-value.jsx-f528a832ada58387{font-weight:600;color:#333}.btn-signin.jsx-f528a832ada58387,.btn-portal.jsx-f528a832ada58387{width:100%;padding:14px;background-color:#4caf50;color:white;border:none;border-radius:4px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color.3s;margin-bottom:15px}.btn-signin.jsx-f528a832ada58387:hover{background-color:#45a049}.btn-disconnect.jsx-f528a832ada58387{width:100%;padding:14px;background-color:#f44336;color:white;border:none;border-radius:4px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color.3s;margin-bottom:15px}.btn-disconnect.jsx-f528a832ada58387:hover{background-color:#d32f2f}.certificate-link.jsx-f528a832ada58387{text-align:center;margin-top:20px}.certificate-link.jsx-f528a832ada58387 a.jsx-f528a832ada58387{color:#0066b2;text-decoration:none;font-size:15px}.certificate-link.jsx-f528a832ada58387 a.jsx-f528a832ada58387:hover{text-decoration:underline}.certificate-description.jsx-f528a832ada58387{text-align:center;font-size:13px;color:#666;margin-top:10px;line-height:1.5}'}),(0,n.jsx)("div",{className:"jsx-f528a832ada58387 body",children:(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 container",children:[(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 card",children:[(0,n.jsx)("div",{className:"jsx-f528a832ada58387 header",children:"SOPHOS"}),(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 content",children:[(0,n.jsx)("h2",{className:"jsx-f528a832ada58387 network-title",children:"User Portal"}),a&&(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 session-info",children:[(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 info-item",children:[(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-label",children:"Name:"}),(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-value",children:a.name})]}),(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 info-item",children:[(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-label",children:"Email:"}),(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-value",children:a.email})]}),(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 info-item",children:[(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-label",children:"IP Address:"}),(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-value",children:a.ip_address})]}),(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 info-item",children:[(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-label",children:"Device:"}),(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-value",children:a.device_name})]}),(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 info-item",children:[(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-label",children:"Connection Time:"}),(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-value",children:(a=>{let e=Math.floor(a/60);return"".concat(e.toString().padStart(2,"0"),":").concat((a%60).toString().padStart(2,"0"))})(s)})]}),(0,n.jsxs)("div",{className:"jsx-f528a832ada58387 info-item",children:[(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-label",children:"Connected:"}),(0,n.jsx)("span",{className:"jsx-f528a832ada58387 info-value",children:new Date(a.connected_at).toLocaleString()})]})]}),(0,n.jsx)("button",{type:"button",style:{width:"100%",padding:"14px",backgroundColor:"transparent",border:"1px solid #ddd",borderRadius:"4px",fontSize:"15px",fontWeight:"500",cursor:"pointer",transition:"background-color 0.3s"},onClick:()=>{alert("HTTPS certificate download would be implemented here")},onMouseOver:a=>a.currentTarget.style.backgroundColor="#f0f7ff",onMouseOut:a=>a.currentTarget.style.backgroundColor="transparent",className:"jsx-f528a832ada58387 certificate-link",children:"Download HTTPS Certificate Authority"}),(0,n.jsx)("button",{type:"button",onClick:x,className:"jsx-f528a832ada58387 btn-disconnect",children:"Disconnect from Network"}),(0,n.jsx)("button",{type:"button",onClick:()=>f.back(),style:{backgroundColor:"#0066b2",color:"white",border:"1px solid #0066b2"},onMouseOver:a=>{a.currentTarget.style.backgroundColor="#0056a2",a.currentTarget.style.borderColor="#0056a2"},onMouseOut:a=>{a.currentTarget.style.backgroundColor="#0066b2",a.currentTarget.style.borderColor="#0066b2"},className:"jsx-f528a832ada58387 btn-portal",children:"Back to Main Portal"})]})]}),(0,n.jsx)("p",{className:"jsx-f528a832ada58387 certificate-description",children:"Your connection is secure and regularly monitored for quality assurance. All network activity is logged in accordance with our security policy."})]})})]})}},6988:(a,e,s)=>{Promise.resolve().then(s.bind(s,3489))}},a=>{a.O(0,[386,441,255,358],()=>a(a.s=6988)),_N_E=a.O()}]);